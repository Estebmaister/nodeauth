doctype html
html(lang="en-US")
  head
    include includes/head.pug
    link(rel="shortcut icon", href="./img/noauth.ico", type="image/x-icon")
    link(rel='stylesheet', type="text/css", href='/css/style.css')

  body
    h1 Node server Password Recovery
    if userID
      //- var id = userID;
      .pane
        p أدخل كلمة مرور جديدة 
        form#formResetPass(action=`/forgot?userID=${userID}`, method='post')
          .input-wrapper
            label(for='res-password') كلمه السر : #[span#res-caps-message.caps-message]
            .input-group
              span.icon
                svg(viewbox='0 0 471 471')
                  path(d='M360.8,200.6v-74.7c0.2-33.8-13.3-66.3-37.4-90C300.1,12.7,269.6,0,237.3,0c-0.5,0-1.1,0-1.6,0 c-68.9,0.1-124.9,56.5-124.9,125.9v74.7c-26,3.1-45,24.9-45,51.3v167.8c0,28.5,22.8,52,51.3,52h237.5c28.5,0,51.3-23.5,51.3-52 V251.9C405.8,225.6,386.8,203.7,360.8,200.6z M130.7,125.9h0.1c0-58.4,47.1-106.2,105-106.2h0.1c27.5-0.1,53.9,10.8,73.4,30.2 c20.3,20.1,31.6,47.5,31.4,76v74.8h-22v-74.8c0.2-22.7-8.8-44.5-24.9-60.5c-15.2-15.2-35.8-23.8-57.3-23.8h-0.6 c-46,0-83.2,37.8-83.2,84.2v74.9h-22V125.9z M298.8,125.9v74.8h-126v-74.8c0-35.4,28.2-64.2,63.2-64.2h0.6 c16.2,0,31.8,6.5,43.3,18C292.1,91.9,299,108.6,298.8,125.9z M386.8,420L386.8,420c0,17.5-14.2,31.7-31.7,31.7H117.5 c-17.5,0-31.7-14.2-31.7-31.7V252.4c0-17.5,14.2-31.7,31.7-31.7h237.6c17.5,0,31.7,14.2,31.7,31.7V420z')
                  path(d='M270.4,330c-4.4-15.5-18.5-26.1-34.6-26.1c-19.9,0-36.1,16.1-36.1,36.1c0,16.1,10.6,30.2,26.1,34.6v28c0,5.5,4.5,10,10,10 s10-4.5,10-10v-28C264.9,369.1,276,349.1,270.4,330z M235.8,356c-8.9,0-16.1-7.2-16.1-16.1c0-8.9,7.2-16.1,16.1-16.1 8.9,0,16.1,7.2,16.1,16.1C251.9,348.8,244.7,356,235.8,356z')
              input#res-password.password-field.check-password(type='password' name='password' onchange='check()' title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required)
              //- pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
              span.icon.icon-show
                svg(viewbox='0 0 512 512')
                  path.path-hide(display='none' d='M316.332,195.662c-4.16-4.16-10.923-4.16-15.083,0c-4.16,4.16-4.16,10.944,0,15.083 c12.075,12.075,18.752,28.139,18.752,45.248c0,35.285-28.715,64-64,64c-17.109,0-33.173-6.656-45.248-18.752 c-4.16-4.16-10.923-4.16-15.083,0c-4.16,4.139-4.16,10.923,0,15.083c16.085,16.128,37.525,25.003,60.331,25.003 c47.061,0,85.333-38.272,85.333-85.333C341.334,233.187,332.46,211.747,316.332,195.662z M270.87,172.131c-4.843-0.853-9.792-1.472-14.869-1.472c-47.061,0-85.333,38.272-85.333,85.333 c0,5.077,0.619,10.027,1.493,14.869c0.917,5.163,5.419,8.811,10.475,8.811c0.619,0,1.237-0.043,1.877-0.171 c5.781-1.024,9.664-6.571,8.64-12.352c-0.661-3.627-1.152-7.317-1.152-11.157c0-35.285,28.715-64,64-64 c3.84,0,7.531,0.491,11.157,1.131c5.675,1.152,11.328-2.859,12.352-8.64C280.534,178.702,276.652,173.155,270.87,172.131z M509.462,249.102c-2.411-2.859-60.117-70.208-139.712-111.445c-5.163-2.709-11.669-0.661-14.379,4.587 c-2.709,5.227-0.661,11.669,4.587,14.379c61.312,31.744,110.293,81.28,127.04,99.371c-25.429,27.541-125.504,128-230.997,128 c-35.797,0-71.872-8.64-107.264-25.707c-5.248-2.581-11.669-0.341-14.229,4.971c-2.581,5.291-0.341,11.669,4.971,14.229 c38.293,18.496,77.504,27.84,116.523,27.84c131.435,0,248.555-136.619,253.483-142.443 C512.854,258.915,512.833,253.091,509.462,249.102z M325.996,118.947c-24.277-8.171-47.829-12.288-69.995-12.288c-131.435,0-248.555,136.619-253.483,142.443 c-3.115,3.669-3.371,9.003-0.597,12.992c1.472,2.112,36.736,52.181,97.856,92.779c1.813,1.216,3.84,1.792,5.888,1.792 c3.435,0,6.827-1.664,8.875-4.8c3.264-4.885,1.92-11.52-2.987-14.763c-44.885-29.845-75.605-65.877-87.104-80.533 c24.555-26.667,125.291-128.576,231.552-128.576c19.861,0,41.131,3.755,63.189,11.157c5.589,2.005,11.648-1.088,13.504-6.699 C334.572,126.862,331.585,120.825,325.996,118.947z M444.865,67.128c-4.16-4.16-10.923-4.16-15.083,0L67.116,429.795c-4.16,4.16-4.16,10.923,0,15.083 c2.091,2.069,4.821,3.115,7.552,3.115c2.731,0,5.461-1.045,7.531-3.115L444.865,82.211 C449.025,78.051,449.025,71.288,444.865,67.128z')
                  path.path-show(display="block" d='M510.096,249.937c-4.032-5.867-100.928-143.275-254.101-143.275C124.56,106.662,7.44,243.281,2.512,249.105 c-3.349,3.968-3.349,9.792,0,13.781C7.44,268.71,124.56,405.329,255.995,405.329S504.549,268.71,509.477,262.886 C512.571,259.217,512.848,253.905,510.096,249.937z M255.995,383.996c-105.365,0-205.547-100.48-230.997-128 c25.408-27.541,125.483-128,230.997-128c123.285,0,210.304,100.331,231.552,127.424 C463.013,282.065,362.256,383.996,255.995,383.996z M255.995,170.662c-47.061,0-85.333,38.272-85.333,85.333s38.272,85.333,85.333,85.333s85.333-38.272,85.333-85.333 S303.056,170.662,255.995,170.662z M255.995,319.996c-35.285,0-64-28.715-64-64s28.715-64,64-64s64,28.715,64,64 S291.28,319.996,255.995,319.996z')
              br
          .input-wrapper
            label(for='res-confirm-password') تأكيد كلمة المرور : #[span#res-confirm-message.confirm-message]
            .input-group
              span.icon
                svg(viewbox='0 0 385 385')
                  path(d="M273.347,94.381L273.347,94.381L273.347,94.381z")
                  path(d="M381.403,94.381L381.403,94.381L381.403,94.381z")
                  path(d="M273.347,94.381L273.347,94.381C274.538,95.56,275.717,96.727,273.347,94.381z")
                  path(d="M273.347,94.381L273.347,94.381c-4.752-4.704-12.439-4.704-17.191,0L84.278,265.127l-63.544-62.473 c-4.74-4.704-12.439-4.704-17.179,0s-4.74,12.319,0,17.011l72.17,70.967c4.692,4.644,12.499,4.644,17.191,0l180.43-179.239 C278.099,106.7,278.086,99.085,273.347,94.381z")
                  path(d="M273.347,94.381L273.347,94.381C270.977,92.035,272.156,93.202,273.347,94.381z")
                  path(d="M381.403,94.381L381.403,94.381C379.033,92.035,380.224,93.202,381.403,94.381z")
                  path(d="M381.403,94.381L381.403,94.381C382.594,95.56,383.773,96.727,381.403,94.381z")
                  path(d="M381.403,94.381L381.403,94.381c-4.752-4.704-12.439-4.704-17.191,0L192.334,265.127l-15.423-14.352 c-4.74-4.704-12.439-4.704-17.179,0s-4.74,12.319,0,17.011l24.049,22.846c4.692,4.644,12.499,4.644,17.191,0l180.43-179.239 C386.155,106.7,386.155,99.085,381.403,94.381z")

              input#res-confirm-password.confirm-password(type='password' name='res-confirm-password' onkeyup='check()' required)
              br
            
          br
          input#res-submit.btn.btn--primary(type='submit' value='غير كلمة السر')
          script(type='application/x-javascript' src="./js/index.js")
    else
      if noUser
        p.fail-message The username #[span.bold-message #{username}] didn't exist
        p #[a(href='/forgot') Back to forgot password]
      else 
        h4.success-message Message sent to the email associated with user: 
        h3.bold-message #{username}
      p #[a(href='/') Back to login page]